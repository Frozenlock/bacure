<!DOCTYPE html>
<html><head><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>bacure.read-properties documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Bacure 0.3.19 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><span>Namespaces</span></h3><ul><li><a href="bacure.coerce.html"><span>bacure.coerce</span></a></li><li><a href="bacure.core.html"><span>bacure.core</span></a></li><li><a href="bacure.local-device.html"><span>bacure.local-device</span></a></li><li><a href="bacure.local-save.html"><span>bacure.local-save</span></a></li><li><a href="bacure.network.html"><span>bacure.network</span></a></li><li class="current"><a href="bacure.read-properties.html"><span>bacure.read-properties</span></a></li><li><a href="bacure.remote-device.html"><span>bacure.remote-device</span></a></li></ul></div><div class="sidebar" id="vars"><h3>Public Vars</h3><ul><li><a href="bacure.read-properties.html#var-*nil-on-APDU-exception*"><span>*nil-on-APDU-exception*</span></a></li><li><a href="bacure.read-properties.html#var-BACnet-array%3F"><span>BACnet-array?</span></a></li><li><a href="bacure.read-properties.html#var-assemble-arrays"><span>assemble-arrays</span></a></li><li><a href="bacure.read-properties.html#var-expand-obj-prop-ref"><span>expand-obj-prop-ref</span></a></li><li><a href="bacure.read-properties.html#var-partition-array"><span>partition-array</span></a></li><li><a href="bacure.read-properties.html#var-read-array-in-chunks"><span>read-array-in-chunks</span></a></li><li><a href="bacure.read-properties.html#var-read-array-individually"><span>read-array-individually</span></a></li><li><a href="bacure.read-properties.html#var-read-individually"><span>read-individually</span></a></li><li><a href="bacure.read-properties.html#var-read-properties"><span>read-properties</span></a></li><li><a href="bacure.read-properties.html#var-read-properties-multiple-objects"><span>read-properties-multiple-objects</span></a></li><li><a href="bacure.read-properties.html#var-read-property-multiple"><span>read-property-multiple</span></a></li><li><a href="bacure.read-properties.html#var-read-property-multiple*"><span>read-property-multiple*</span></a></li><li><a href="bacure.read-properties.html#var-read-property-multiple-request"><span>read-property-multiple-request</span></a></li><li><a href="bacure.read-properties.html#var-read-property-request"><span>read-property-request</span></a></li><li><a href="bacure.read-properties.html#var-read-range"><span>read-range</span></a></li><li><a href="bacure.read-properties.html#var-read-range-request"><span>read-range-request</span></a></li><li><a href="bacure.read-properties.html#var-read-single-property"><span>read-single-property</span></a></li><li><a href="bacure.read-properties.html#var-read-single-property-with-fallback"><span>read-single-property-with-fallback</span></a></li><li><a href="bacure.read-properties.html#var-replace-special-identifier"><span>replace-special-identifier</span></a></li><li><a href="bacure.read-properties.html#var-send-request"><span>send-request</span></a></li></ul></div><div class="namespace-docs" id="content"><h2>bacure.read-properties documentation</h2><pre class="doc"></pre><div class="public" id="var-*nil-on-APDU-exception*"><h3>*nil-on-APDU-exception*</h3><div class="usage"></div><pre class="doc">Return nil instead of throwing an exception.
</pre><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/read_properties.clj#L18">Source</a></div></div><div class="public" id="var-BACnet-array%3F"><h3>BACnet-array?</h3><div class="usage"><code>(BACnet-array? data)</code></div><pre class="doc">Return true if the raw data returned by a read property is part of
an array.</pre><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/read_properties.clj#L134">Source</a></div></div><div class="public" id="var-assemble-arrays"><h3>assemble-arrays</h3><div class="usage"><code>(assemble-arrays data)</code></div><pre class="doc">Reassemble arrays from data returned from a
read-property-multiple.</pre><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/read_properties.clj#L139">Source</a></div></div><div class="public" id="var-expand-obj-prop-ref"><h3>expand-obj-prop-ref</h3><div class="usage"><code>(expand-obj-prop-ref obj-prop-refs)</code></div><pre class="doc">Take a normal object-property-references, such as

[ [[:analog-input 0] :description :object-name] ...]

and separate the properties into individual references to obtain:
[ [[:analog-input 0] :description]
  [[:analog-input 0] :object-name] ...]</pre><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/read_properties.clj#L193">Source</a></div></div><div class="public" id="var-partition-array"><h3>partition-array</h3><div class="usage"><code>(partition-array device-id object-identifier property-reference)</code></div><pre class="doc">Ask the remote device what is the length of the BACnet array and
return as many object-property-identifiers. If object is not an
array, return nil.</pre><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/read_properties.clj#L56">Source</a></div></div><div class="public" id="var-read-array-in-chunks"><h3>read-array-in-chunks</h3><div class="usage"><code>(read-array-in-chunks device-id partitioned-array)</code></div><pre class="doc">Read the partitioned arrays in chunks and then assemble them back
together.</pre><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/read_properties.clj#L182">Source</a></div></div><div class="public" id="var-read-array-individually"><h3>read-array-individually</h3><div class="usage"><code>(read-array-individually device-id object-identifier property-reference)</code></div><pre class="doc">Read a BACnet array one time at the time and re-assemble the result
afterward.</pre><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/read_properties.clj#L68">Source</a></div></div><div class="public" id="var-read-individually"><h3>read-individually</h3><div class="usage"><code>(read-individually device-id object-property-references)</code></div><pre class="doc">Given a list of object-property-references, return a list of properties maps.

[[[:analog-input 0] :description]
 [[:analog-input 1] :object-name]
 [[:device 1234] [:object-list 2]]] &lt;---- with array index

----&gt;

({:description &quot;ANALOG INPUT 0&quot;, :object-identifier [:analog-input 0]}
 {:object-name &quot;ANALOG INPUT 1&quot;, :object-identifier [:analog-input 1]}
 {[:object-list 2] [:analog-input 0], :object-identifier [:device 1234]})</pre><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/read_properties.clj#L85">Source</a></div></div><div class="public" id="var-read-properties"><h3>read-properties</h3><div class="usage"><code>(read-properties device-id object-property-references)</code></div><pre class="doc">Retrieve the property values form a remote device.
Format for object-property-references should be:

[ [[:analog-input 0] :description :object-name]   &lt;--- multiple properties
  [[:device 1234] [:object-list 0]                &lt;--- array access
  [[:analog-ouput 1] :present-value]  ...]</pre><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/read_properties.clj#L259">Source</a></div></div><div class="public" id="var-read-properties-multiple-objects"><h3>read-properties-multiple-objects</h3><div class="usage"><code>(read-properties-multiple-objects device-id object-identifiers properties)</code></div><pre class="doc">A convenience function to retrieve properties for multiple
objects.</pre><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/read_properties.clj#L276">Source</a></div></div><div class="public" id="var-read-property-multiple"><h3>read-property-multiple</h3><div class="usage"><code>(read-property-multiple device-id obj-prop-references)</code></div><pre class="doc">read-access-specification should be of the form:
[[object-identifier property-references]
 [object-identifier property-references]]

In case of an APDU size problem, will divide the request in two
parts. If any of those two parts have a problem, it will be split
again, and so on and so forth.

If the object-property-references is a single item and there's
still an APDU size problem, it probably means the property we are
trying to read is an array. It will be divided and read in chunks.</pre><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/read_properties.clj#L207">Source</a></div></div><div class="public" id="var-read-property-multiple*"><h3>read-property-multiple*</h3><div class="usage"><code>(read-property-multiple* device-id obj-prop-references)</code></div><pre class="doc">read-access-specification should be of the form:
[[object-identifier property-references]
 [object-identifier property-references]]</pre><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/read_properties.clj#L156">Source</a></div></div><div class="public" id="var-read-property-multiple-request"><h3>read-property-multiple-request</h3><div class="usage"><code>(read-property-multiple-request obj-prop-references)</code></div><pre class="doc">Create a read-property-multiple request.
[[object-identifier property-references]
 [object-identifier property-references]]</pre><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/read_properties.clj#L125">Source</a></div></div><div class="public" id="var-read-property-request"><h3>read-property-request</h3><div class="usage"><code>(read-property-request object-identifier property-reference)</code></div><pre class="doc">Create a read-property request.

[:analog-input 0] :description
[:analog-input 0] [:description 0] &lt;--- with array index</pre><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/read_properties.clj#L33">Source</a></div></div><div class="public" id="var-read-range"><h3>read-range</h3><div class="usage"><code>(read-range device-id object-identifier property-identifier array-index [reference range] &amp; by-what?)</code></div><pre class="doc">'by-what?' can be :sequence, :time, or position (the default if
none is provided).</pre><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/read_properties.clj#L315">Source</a></div></div><div class="public" id="var-read-range-request"><h3>read-range-request</h3><div class="usage"><code>(read-range-request object-identifier property-identifier array-index [reference range] &amp; by-what?)</code></div><pre class="doc">'by-what?' can be :sequence, :time, or position (the default if
none is provided).</pre><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/read_properties.clj#L305">Source</a></div></div><div class="public" id="var-read-single-property"><h3>read-single-property</h3><div class="usage"><code>(read-single-property device-id object-identifier property-reference)</code></div><pre class="doc">Read a single property.
</pre><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/read_properties.clj#L45">Source</a></div></div><div class="public" id="var-read-single-property-with-fallback"><h3>read-single-property-with-fallback</h3><div class="usage"><code>(read-single-property-with-fallback device-id object-identifier property-reference)</code></div><pre class="doc">Read a single property. If there's a size-related APDU error, will
try to read the BACnet arrays one item at the time.</pre><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/read_properties.clj#L74">Source</a></div></div><div class="public" id="var-replace-special-identifier"><h3>replace-special-identifier</h3><div class="usage"><code>(replace-special-identifier object-property-references)</code></div><pre class="doc">For devices that don't support the special identifiers 
(i.e. :all, :required and :optional), return a list of properties.

The :all won't be as the one defined by the BACnet standard,
because we can't know for sure what are the properties. (Especially
in the case of proprietary objects.)</pre><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/read_properties.clj#L244">Source</a></div></div><div class="public" id="var-send-request"><h3>send-request</h3><div class="usage"><code>(send-request device-id request)</code></div><pre class="doc">Send the request to the remote device
</pre><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/read_properties.clj#L21">Source</a></div></div></div></body></html>