<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>bacure.read-properties documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Bacure 0.5.2 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>bacure</span></div></div></li><li class="depth-2 branch"><a href="bacure.coerce.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>coerce</span></div></a></li><li class="depth-2 branch"><a href="bacure.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="bacure.local-device.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>local-device</span></div></a></li><li class="depth-2 branch"><a href="bacure.local-save.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>local-save</span></div></a></li><li class="depth-2 branch"><a href="bacure.network.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>network</span></div></a></li><li class="depth-2 branch current"><a href="bacure.read-properties.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>read-properties</span></div></a></li><li class="depth-2 branch"><a href="bacure.read-properties-cached.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>read-properties-cached</span></div></a></li><li class="depth-2"><a href="bacure.remote-device.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>remote-device</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="bacure.read-properties.html#var-*nil-on-APDU-exception*"><div class="inner"><span>*nil-on-APDU-exception*</span></div></a></li><li class="depth-1"><a href="bacure.read-properties.html#var-assemble-arrays"><div class="inner"><span>assemble-arrays</span></div></a></li><li class="depth-1"><a href="bacure.read-properties.html#var-BACnet-array.3F"><div class="inner"><span>BACnet-array?</span></div></a></li><li class="depth-1"><a href="bacure.read-properties.html#var-compact-obj-prop-ref"><div class="inner"><span>compact-obj-prop-ref</span></div></a></li><li class="depth-1"><a href="bacure.read-properties.html#var-expand-obj-prop-ref"><div class="inner"><span>expand-obj-prop-ref</span></div></a></li><li class="depth-1"><a href="bacure.read-properties.html#var-find-max-refs"><div class="inner"><span>find-max-refs</span></div></a></li><li class="depth-1"><a href="bacure.read-properties.html#var-partition-array"><div class="inner"><span>partition-array</span></div></a></li><li class="depth-1"><a href="bacure.read-properties.html#var-partition-object-property-references"><div class="inner"><span>partition-object-property-references</span></div></a></li><li class="depth-1"><a href="bacure.read-properties.html#var-read-array-in-chunks"><div class="inner"><span>read-array-in-chunks</span></div></a></li><li class="depth-1"><a href="bacure.read-properties.html#var-read-array-individually"><div class="inner"><span>read-array-individually</span></div></a></li><li class="depth-1"><a href="bacure.read-properties.html#var-read-individually"><div class="inner"><span>read-individually</span></div></a></li><li class="depth-1"><a href="bacure.read-properties.html#var-read-properties"><div class="inner"><span>read-properties</span></div></a></li><li class="depth-1"><a href="bacure.read-properties.html#var-read-properties-multiple-objects"><div class="inner"><span>read-properties-multiple-objects</span></div></a></li><li class="depth-1"><a href="bacure.read-properties.html#var-read-property-multiple"><div class="inner"><span>read-property-multiple</span></div></a></li><li class="depth-1"><a href="bacure.read-properties.html#var-read-property-multiple*"><div class="inner"><span>read-property-multiple*</span></div></a></li><li class="depth-1"><a href="bacure.read-properties.html#var-read-property-multiple-request"><div class="inner"><span>read-property-multiple-request</span></div></a></li><li class="depth-1"><a href="bacure.read-properties.html#var-read-property-request"><div class="inner"><span>read-property-request</span></div></a></li><li class="depth-1"><a href="bacure.read-properties.html#var-read-range"><div class="inner"><span>read-range</span></div></a></li><li class="depth-1"><a href="bacure.read-properties.html#var-read-range-request"><div class="inner"><span>read-range-request</span></div></a></li><li class="depth-1"><a href="bacure.read-properties.html#var-read-range-request-by"><div class="inner"><span>read-range-request-by</span></div></a></li><li class="depth-1"><a href="bacure.read-properties.html#var-read-single-property"><div class="inner"><span>read-single-property</span></div></a></li><li class="depth-1"><a href="bacure.read-properties.html#var-read-single-property-with-fallback"><div class="inner"><span>read-single-property-with-fallback</span></div></a></li><li class="depth-1"><a href="bacure.read-properties.html#var-replace-special-identifier"><div class="inner"><span>replace-special-identifier</span></div></a></li><li class="depth-1"><a href="bacure.read-properties.html#var-send-request"><div class="inner"><span>send-request</span></div></a></li><li class="depth-1"><a href="bacure.read-properties.html#var-size-related.3F"><div class="inner"><span>size-related?</span></div></a></li><li class="depth-1"><a href="bacure.read-properties.html#var-split-opr"><div class="inner"><span>split-opr</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">bacure.read-properties</h2><div class="doc"><pre class="plaintext"></pre></div><div class="public anchor" id="var-*nil-on-APDU-exception*"><h3>*nil-on-APDU-exception*</h3><h4 class="dynamic">dynamic</h4><div class="usage"></div><div class="doc"><pre class="plaintext">Return nil instead of throwing an exception.
</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/read_properties.clj#L18">view source</a></div></div><div class="public anchor" id="var-assemble-arrays"><h3>assemble-arrays</h3><div class="usage"><code>(assemble-arrays data)</code></div><div class="doc"><pre class="plaintext">Reassemble arrays from data returned from a
read-property-multiple.</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/read_properties.clj#L140">view source</a></div></div><div class="public anchor" id="var-BACnet-array.3F"><h3>BACnet-array?</h3><div class="usage"><code>(BACnet-array? data)</code></div><div class="doc"><pre class="plaintext">Return true if the raw data returned by a read property is part of
an array.</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/read_properties.clj#L135">view source</a></div></div><div class="public anchor" id="var-compact-obj-prop-ref"><h3>compact-obj-prop-ref</h3><div class="usage"><code>(compact-obj-prop-ref obj-prop-refs)</code></div><div class="doc"><pre class="plaintext">Inverse of &apos;expand-obj-prop-ref&apos;.
</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/read_properties.clj#L207">view source</a></div></div><div class="public anchor" id="var-expand-obj-prop-ref"><h3>expand-obj-prop-ref</h3><div class="usage"><code>(expand-obj-prop-ref obj-prop-refs)</code></div><div class="doc"><pre class="plaintext">Take a normal object-property-references, such as

[ [[:analog-input 0] :description :object-name] ...]

and separate the properties into individual references to obtain:
[ [[:analog-input 0] :description]
  [[:analog-input 0] :object-name] ...]</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/read_properties.clj#L194">view source</a></div></div><div class="public anchor" id="var-find-max-refs"><h3>find-max-refs</h3><div class="usage"><code>(find-max-refs device-id)</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/read_properties.clj#L116">view source</a></div></div><div class="public anchor" id="var-partition-array"><h3>partition-array</h3><div class="usage"><code>(partition-array device-id object-identifier property-reference)</code></div><div class="doc"><pre class="plaintext">Ask the remote device what is the length of the BACnet array and
return as many object-property-identifiers. If object is not an
array, return nil.</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/read_properties.clj#L56">view source</a></div></div><div class="public anchor" id="var-partition-object-property-references"><h3>partition-object-property-references</h3><div class="usage"><code>(partition-object-property-references device-id obj-prop-references)</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/read_properties.clj#L121">view source</a></div></div><div class="public anchor" id="var-read-array-in-chunks"><h3>read-array-in-chunks</h3><div class="usage"><code>(read-array-in-chunks device-id partitioned-array)</code></div><div class="doc"><pre class="plaintext">Read the partitioned arrays in chunks and then assemble them back
together.</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/read_properties.clj#L183">view source</a></div></div><div class="public anchor" id="var-read-array-individually"><h3>read-array-individually</h3><div class="usage"><code>(read-array-individually device-id object-identifier property-reference)</code></div><div class="doc"><pre class="plaintext">Read a BACnet array one time at the time and re-assemble the result
afterward.</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/read_properties.clj#L69">view source</a></div></div><div class="public anchor" id="var-read-individually"><h3>read-individually</h3><div class="usage"><code>(read-individually device-id object-property-references)</code></div><div class="doc"><pre class="plaintext">Given a list of object-property-references, return a list of properties maps.

[[[:analog-input 0] :description]
 [[:analog-input 1] :object-name]
 [[:device 1234] [:object-list 2]]] &lt;---- with array index

----&gt;

({:description &quot;ANALOG INPUT 0&quot;, :object-identifier [:analog-input 0]}
 {:object-name &quot;ANALOG INPUT 1&quot;, :object-identifier [:analog-input 1]}
 {[:object-list 2] [:analog-input 0], :object-identifier [:device 1234]})</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/read_properties.clj#L86">view source</a></div></div><div class="public anchor" id="var-read-properties"><h3>read-properties</h3><div class="usage"><code>(read-properties device-id object-property-references)</code></div><div class="doc"><pre class="plaintext">Retrieve the property values form a remote device.
Format for object-property-references should be:

[ [[:analog-input 0] :description :object-name]   &lt;--- multiple properties
  [[:device 1234] [:object-list 0]                &lt;--- array access
  [[:analog-ouput 1] :present-value]  ...]</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/read_properties.clj#L271">view source</a></div></div><div class="public anchor" id="var-read-properties-multiple-objects"><h3>read-properties-multiple-objects</h3><div class="usage"><code>(read-properties-multiple-objects device-id object-identifiers properties)</code></div><div class="doc"><pre class="plaintext">A convenience function to retrieve properties for multiple
objects.</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/read_properties.clj#L288">view source</a></div></div><div class="public anchor" id="var-read-property-multiple"><h3>read-property-multiple</h3><div class="usage"><code>(read-property-multiple device-id obj-prop-references)</code></div><div class="doc"><pre class="plaintext">read-access-specification should be of the form:
[[object-identifier property-references]
 [object-identifier property-references]]

In case of an APDU size problem, will divide the request in two
parts. If any of those two parts have a problem, it will be split
again, and so on and so forth.

If the object-property-references is a single item and there&apos;s
still an APDU size problem, it probably means the property we are
trying to read is an array. It will be divided and read in chunks.</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/read_properties.clj#L213">view source</a></div></div><div class="public anchor" id="var-read-property-multiple*"><h3>read-property-multiple*</h3><div class="usage"><code>(read-property-multiple* device-id obj-prop-references)</code></div><div class="doc"><pre class="plaintext">read-access-specification should be of the form:
[[object-identifier property-references]
 [object-identifier property-references]]</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/read_properties.clj#L157">view source</a></div></div><div class="public anchor" id="var-read-property-multiple-request"><h3>read-property-multiple-request</h3><div class="usage"><code>(read-property-multiple-request obj-prop-references)</code></div><div class="doc"><pre class="plaintext">Create a read-property-multiple request.
[[object-identifier property-references]
 [object-identifier property-references]]</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/read_properties.clj#L126">view source</a></div></div><div class="public anchor" id="var-read-property-request"><h3>read-property-request</h3><div class="usage"><code>(read-property-request object-identifier property-reference)</code></div><div class="doc"><pre class="plaintext">Create a read-property request.

[:analog-input 0] :description
[:analog-input 0] [:description 0] &lt;--- with array index</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/read_properties.clj#L33">view source</a></div></div><div class="public anchor" id="var-read-range"><h3>read-range</h3><div class="usage"><code>(read-range device-id object-identifier property-identifier array-index [reference range] &amp; by-what?)</code></div><div class="doc"><pre class="plaintext">&apos;by-what?&apos; can be :sequence, :time, or position (the default if
none is provided).</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/read_properties.clj#L327">view source</a></div></div><div class="public anchor" id="var-read-range-request"><h3>read-range-request</h3><div class="usage"><code>(read-range-request object-identifier property-identifier array-index [reference range] &amp; by-what?)</code></div><div class="doc"><pre class="plaintext">&apos;by-what?&apos; can be :sequence, :time, or position (the default if
none is provided).</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/read_properties.clj#L317">view source</a></div></div><div class="public anchor" id="var-read-range-request-by"><h3>read-range-request-by</h3><div class="usage"><code>(read-range-request-by reference range &amp; by-what)</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/read_properties.clj#L310">view source</a></div></div><div class="public anchor" id="var-read-single-property"><h3>read-single-property</h3><div class="usage"><code>(read-single-property device-id object-identifier property-reference)</code></div><div class="doc"><pre class="plaintext">Read a single property.
</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/read_properties.clj#L45">view source</a></div></div><div class="public anchor" id="var-read-single-property-with-fallback"><h3>read-single-property-with-fallback</h3><div class="usage"><code>(read-single-property-with-fallback device-id object-identifier property-reference)</code></div><div class="doc"><pre class="plaintext">Read a single property. If there&apos;s a size-related APDU error, will
try to read the BACnet arrays one item at the time.</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/read_properties.clj#L75">view source</a></div></div><div class="public anchor" id="var-replace-special-identifier"><h3>replace-special-identifier</h3><div class="usage"><code>(replace-special-identifier object-property-references)</code></div><div class="doc"><pre class="plaintext">For devices that don&apos;t support the special identifiers 
(i.e. :all, :required and :optional), return a list of properties.

The :all won&apos;t be as the one defined by the BACnet standard,
because we can&apos;t know for sure what are the properties. (Especially
in the case of proprietary objects.)</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/read_properties.clj#L256">view source</a></div></div><div class="public anchor" id="var-send-request"><h3>send-request</h3><div class="usage"><code>(send-request device-id request)</code></div><div class="doc"><pre class="plaintext">Send the request to the remote device
</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/read_properties.clj#L21">view source</a></div></div><div class="public anchor" id="var-size-related.3F"><h3>size-related?</h3><div class="usage"><code>(size-related? apdu-exception)</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/read_properties.clj#L51">view source</a></div></div><div class="public anchor" id="var-split-opr"><h3>split-opr</h3><div class="usage"><code>(split-opr obj-prop-references)</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/read_properties.clj#L178">view source</a></div></div></div></body></html>