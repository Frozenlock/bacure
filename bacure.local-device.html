<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><link href="css/default.css" rel="stylesheet" type="text/css" /><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>bacure.local-device documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Bacure</span> <span class="project-version">1.0.0</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>bacure</span></div></div></li><li class="depth-2"><a href="bacure.coerce.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>coerce</span></div></a></li><li class="depth-3 branch"><a href="bacure.coerce.obj.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>obj</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>service</span></div></div></li><li class="depth-4"><a href="bacure.coerce.service.acknowledgement.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>acknowledgement</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>type</span></div></div></li><li class="depth-4 branch"><a href="bacure.coerce.type.constructed.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>constructed</span></div></a></li><li class="depth-4 branch"><a href="bacure.coerce.type.enumerated.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>enumerated</span></div></a></li><li class="depth-4"><a href="bacure.coerce.type.primitive.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>primitive</span></div></a></li><li class="depth-2 branch"><a href="bacure.core.html"><div class="inner"><span class="tree" style="top: -238px;"><span class="top" style="height: 247px;"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch current"><a href="bacure.local-device.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>local-device</span></div></a></li><li class="depth-2 branch"><a href="bacure.local-save.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>local-save</span></div></a></li><li class="depth-2 branch"><a href="bacure.network.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>network</span></div></a></li><li class="depth-2 branch"><a href="bacure.read-properties.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>read-properties</span></div></a></li><li class="depth-2"><a href="bacure.remote-device.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>remote-device</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="bacure.local-device.html#var-clear-all.21"><div class="inner"><span>clear-all!</span></div></a></li><li class="depth-1"><a href="bacure.local-device.html#var-default-configs"><div class="inner"><span>default-configs</span></div></a></li><li class="depth-1"><a href="bacure.local-device.html#var-default-transport"><div class="inner"><span>default-transport</span></div></a></li><li class="depth-1"><a href="bacure.local-device.html#var-get-configs"><div class="inner"><span>get-configs</span></div></a></li><li class="depth-1"><a href="bacure.local-device.html#var-get-local-device"><div class="inner"><span>get-local-device</span></div></a></li><li class="depth-1"><a href="bacure.local-device.html#var-get-local-device-id"><div class="inner"><span>get-local-device-id</span></div></a></li><li class="depth-1"><a href="bacure.local-device.html#var-i-am-broadcast.21"><div class="inner"><span>i-am-broadcast!</span></div></a></li><li class="depth-1"><a href="bacure.local-device.html#var-initialize.21"><div class="inner"><span>initialize!</span></div></a></li><li class="depth-1"><a href="bacure.local-device.html#var-list-local-devices"><div class="inner"><span>list-local-devices</span></div></a></li><li class="depth-1"><a href="bacure.local-device.html#var-load-local-device-backup.21"><div class="inner"><span>load-local-device-backup!</span></div></a></li><li class="depth-1"><a href="bacure.local-device.html#var-local-device-backup"><div class="inner"><span>local-device-backup</span></div></a></li><li class="depth-1"><a href="bacure.local-device.html#var-local-device-object"><div class="inner"><span>local-device-object</span></div></a></li><li class="depth-1"><a href="bacure.local-device.html#var-local-devices"><div class="inner"><span>local-devices</span></div></a></li><li class="depth-1"><a href="bacure.local-device.html#var-mapify"><div class="inner"><span>mapify</span></div></a></li><li class="depth-1"><a href="bacure.local-device.html#var-new-local-device.21"><div class="inner"><span>new-local-device!</span></div></a></li><li class="depth-1"><a href="bacure.local-device.html#var-reset-local-device.21"><div class="inner"><span>reset-local-device!</span></div></a></li><li class="depth-1"><a href="bacure.local-device.html#var-save-local-device-backup.21"><div class="inner"><span>save-local-device-backup!</span></div></a></li><li class="depth-1"><a href="bacure.local-device.html#var-terminate.21"><div class="inner"><span>terminate!</span></div></a></li><li class="depth-1"><a href="bacure.local-device.html#var-terminate-all.21"><div class="inner"><span>terminate-all!</span></div></a></li><li class="depth-1"><a href="bacure.local-device.html#var-update-configs.21"><div class="inner"><span>update-configs!</span></div></a></li><li class="depth-1"><a href="bacure.local-device.html#var-with-temp-devices"><div class="inner"><span>with-temp-devices</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">bacure.local-device</h1><div class="doc"><pre class="plaintext"></pre></div><div class="public anchor" id="var-clear-all.21"><h3>clear-all!</h3><div class="usage"><code>(clear-all!)</code></div><div class="doc"><pre class="plaintext">Destroy all traces of a local-device.
</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/local_device.clj#L276">view source</a></div></div><div class="public anchor" id="var-default-configs"><h3>default-configs</h3><div class="usage"></div><div class="doc"><pre class="plaintext">Some default configurations for device creation.
</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/local_device.clj#L99">view source</a></div></div><div class="public anchor" id="var-default-transport"><h3>default-transport</h3><div class="usage"><code>(default-transport network)</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/local_device.clj#L56">view source</a></div></div><div class="public anchor" id="var-get-configs"><h3>get-configs</h3><div class="usage"><code>(get-configs local-device-id)</code></div><div class="doc"><pre class="plaintext">Return a map of the local-device configurations
</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/local_device.clj#L59">view source</a></div></div><div class="public anchor" id="var-get-local-device"><h3>get-local-device</h3><div class="usage"><code>(get-local-device device-id)</code></div><div class="doc"><pre class="plaintext">Return the local-device associated with the device-id. If device-id
is nil, simply return the first found.</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/local_device.clj#L40">view source</a></div></div><div class="public anchor" id="var-get-local-device-id"><h3>get-local-device-id</h3><div class="usage"><code>(get-local-device-id device-object)</code></div><div class="doc"><pre class="plaintext">Given a local device object, return the device ID.
</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/local_device.clj#L69">view source</a></div></div><div class="public anchor" id="var-i-am-broadcast.21"><h3>i-am-broadcast!</h3><div class="usage"><code>(i-am-broadcast!)</code><code>(i-am-broadcast! local-device-id)</code></div><div class="doc"><pre class="plaintext">Send an 'I am' broadcast on the network.
</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/local_device.clj#L170">view source</a></div></div><div class="public anchor" id="var-initialize.21"><h3>initialize!</h3><div class="usage"><code>(initialize!)</code><code>(initialize! local-device-id)</code></div><div class="doc"><pre class="plaintext">Initialize the local device. This will bind it to it's port (most
likely 47808) and load any programs available for the local-device.
The port will remain unavailable until the device is terminated.
Once terminated, you should discard the device and create a new one
if needed.

For more information on the local-device 'programs' operations, see
the bacure.local-save namespace.

Return true if initializing (binding to port) is successful.</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/local_device.clj#L179">view source</a></div></div><div class="public anchor" id="var-list-local-devices"><h3>list-local-devices</h3><div class="usage"><code>(list-local-devices)</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/local_device.clj#L37">view source</a></div></div><div class="public anchor" id="var-load-local-device-backup.21"><h3>load-local-device-backup!</h3><div class="usage"><code>(load-local-device-backup! local-device-id)</code><code>(load-local-device-backup! local-device-id new-configs)</code></div><div class="doc"><pre class="plaintext">Load the local-device backup file and reset it with this new
configuration.</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/local_device.clj#L288">view source</a></div></div><div class="public anchor" id="var-local-device-backup"><h3>local-device-backup</h3><div class="usage"><code>(local-device-backup)</code><code>(local-device-backup local-device-id)</code></div><div class="doc"><pre class="plaintext">Get the necessary information to create a local device backup.
</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/local_device.clj#L241">view source</a></div></div><div class="public anchor" id="var-local-device-object"><h3>local-device-object</h3><div class="usage"><code>(local-device-object device-id)</code></div><div class="doc"><pre class="plaintext">Return the local-device bacnet4j object associated with the
device-id. If device-id is nil, simply return the first found.</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/local_device.clj#L48">view source</a></div></div><div class="public anchor" id="var-local-devices"><h3>local-devices</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/local_device.clj#L35">view source</a></div></div><div class="public anchor" id="var-mapify"><h3>mapify</h3><h4 class="type">macro</h4><div class="usage"><code>(mapify &amp; symbols)</code></div><div class="doc"><pre class="plaintext">Given some symbols, construct a map with the symbols as keys, and
 the value of the symbols as the map values. For example:
(Let [aa 12]
    (mapify aa))
=&gt; {:aa 12}</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/local_device.clj#L17">view source</a></div></div><div class="public anchor" id="var-new-local-device.21"><h3>new-local-device!</h3><div class="usage"><code>(new-local-device!)</code><code>(new-local-device! configs-map)</code></div><div class="doc"><pre class="plaintext">Return a new configured BACnet local device . (A device is required
to communicate over the BACnet network.). Use the function
'initialize' and 'terminate' to bind and unbind the device to the
BACnet port. If needed, the initial configurations are available in
the atom 'local-device-configs.

The optional config map can contain the following:
:device-id &lt;number&gt;
:broadcast-address &lt;string&gt;
:port &lt;number&gt;
:local-address &lt;string&gt; &lt;----- You probably don't want to use it.
:'other-configs' &lt;string&gt; OR &lt;number&gt; OR other

The device ID is the device identifier on the network. It should be
unique.

The broadcast-address is the address on which we send 'WhoIs'. You
should not have to provide anything for this, unless you have
multiple interfaces or want to trick your machine into sending to a
'fake' broadcast address.

Port and destination port are the BACnet port, usually 47808.

The local-address will default to "0.0.0.0", also known as the
'anylocal'. (Default by the underlying BACnet4J library.) This is
required on Linux, Solaris and some Windows machines in order to
catch packet sent as a broadcast. You can manually change it, but
unless you know exactly what you are doing, bad things will happen.

The 'other-configs' is any configuration returned when using the
function 'get-configs'. These configuation can be set when the
device is created simply by providing them in the arguments. For
example, to change the vendor name, simply add '{:vendor-name "some
vendor name"}'.</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/local_device.clj#L111">view source</a></div></div><div class="public anchor" id="var-reset-local-device.21"><h3>reset-local-device!</h3><div class="usage"><code>(reset-local-device!)</code><code>(reset-local-device! config-or-id)</code><code>(reset-local-device! local-device-id new-config)</code></div><div class="doc"><pre class="plaintext">Terminate the local device and discard it. Replace it with a new
local device, and apply the same configurations as the previous one.
If a map with new configurations is provided, it will be merged with
the old config.

(reset-local-device {:device-id 1112})
---&gt; reset the device and change the device id.</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/local_device.clj#L252">view source</a></div></div><div class="public anchor" id="var-save-local-device-backup.21"><h3>save-local-device-backup!</h3><div class="usage"><code>(save-local-device-backup!)</code></div><div class="doc"><pre class="plaintext">Save the device backup on a local file and return the config map.
</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/local_device.clj#L282">view source</a></div></div><div class="public anchor" id="var-terminate.21"><h3>terminate!</h3><div class="usage"><code>(terminate!)</code><code>(terminate! local-device-id)</code></div><div class="doc"><pre class="plaintext">Terminate the local device, freeing any bound port in the process.
</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/local_device.clj#L209">view source</a></div></div><div class="public anchor" id="var-terminate-all.21"><h3>terminate-all!</h3><div class="usage"><code>(terminate-all!)</code></div><div class="doc"><pre class="plaintext">Terminate all local devices.
</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/local_device.clj#L216">view source</a></div></div><div class="public anchor" id="var-update-configs.21"><h3>update-configs!</h3><div class="usage"><code>(update-configs! local-device-id properties-smap)</code></div><div class="doc"><pre class="plaintext">Given a map of properties, will update the local-device. Return the
device configs. Please note that many properties CANNOT be changed
while the device is initialized (:object-identifier for example) and
will simply be discarded.</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/local_device.clj#L83">view source</a></div></div><div class="public anchor" id="var-with-temp-devices"><h3>with-temp-devices</h3><h4 class="type">macro</h4><div class="usage"><code>(with-temp-devices &amp; body)</code></div><div class="doc"><pre class="plaintext">Execute body with a temporary set of local-devices. Any existing
devices will be terminated before the body executes and re-initiated
after. Useful for tests.</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/local_device.clj#L222">view source</a></div></div></div></body></html>