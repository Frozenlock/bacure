<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>bacure.local-device documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Bacure 0.5.2 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>bacure</span></div></div></li><li class="depth-2 branch"><a href="bacure.coerce.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>coerce</span></div></a></li><li class="depth-2 branch"><a href="bacure.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch current"><a href="bacure.local-device.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>local-device</span></div></a></li><li class="depth-2 branch"><a href="bacure.local-save.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>local-save</span></div></a></li><li class="depth-2 branch"><a href="bacure.network.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>network</span></div></a></li><li class="depth-2 branch"><a href="bacure.read-properties.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>read-properties</span></div></a></li><li class="depth-2 branch"><a href="bacure.read-properties-cached.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>read-properties-cached</span></div></a></li><li class="depth-2"><a href="bacure.remote-device.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>remote-device</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="bacure.local-device.html#var-add-object"><div class="inner"><span>add-object</span></div></a></li><li class="depth-1"><a href="bacure.local-device.html#var-add-or-update-object"><div class="inner"><span>add-or-update-object</span></div></a></li><li class="depth-1"><a href="bacure.local-device.html#var-clear-all.21"><div class="inner"><span>clear-all!</span></div></a></li><li class="depth-1"><a href="bacure.local-device.html#var-default-configs"><div class="inner"><span>default-configs</span></div></a></li><li class="depth-1"><a href="bacure.local-device.html#var-get-configs"><div class="inner"><span>get-configs</span></div></a></li><li class="depth-1"><a href="bacure.local-device.html#var-i-am-broadcast"><div class="inner"><span>i-am-broadcast</span></div></a></li><li class="depth-1"><a href="bacure.local-device.html#var-initialize"><div class="inner"><span>initialize</span></div></a></li><li class="depth-1"><a href="bacure.local-device.html#var-ip-network"><div class="inner"><span>ip-network</span></div></a></li><li class="depth-1"><a href="bacure.local-device.html#var-load-local-device-backup"><div class="inner"><span>load-local-device-backup</span></div></a></li><li class="depth-1"><a href="bacure.local-device.html#var-local-device"><div class="inner"><span>local-device</span></div></a></li><li class="depth-1"><a href="bacure.local-device.html#var-local-device-backup"><div class="inner"><span>local-device-backup</span></div></a></li><li class="depth-1"><a href="bacure.local-device.html#var-local-device-configs"><div class="inner"><span>local-device-configs</span></div></a></li><li class="depth-1"><a href="bacure.local-device.html#var-local-objects"><div class="inner"><span>local-objects</span></div></a></li><li class="depth-1"><a href="bacure.local-device.html#var-mapify"><div class="inner"><span>mapify</span></div></a></li><li class="depth-1"><a href="bacure.local-device.html#var-net"><div class="inner"><span>net</span></div></a></li><li class="depth-1"><a href="bacure.local-device.html#var-new-local-device"><div class="inner"><span>new-local-device</span></div></a></li><li class="depth-1"><a href="bacure.local-device.html#var-remove-all-objects"><div class="inner"><span>remove-all-objects</span></div></a></li><li class="depth-1"><a href="bacure.local-device.html#var-remove-object"><div class="inner"><span>remove-object</span></div></a></li><li class="depth-1"><a href="bacure.local-device.html#var-reset-local-device"><div class="inner"><span>reset-local-device</span></div></a></li><li class="depth-1"><a href="bacure.local-device.html#var-save-local-device-backup"><div class="inner"><span>save-local-device-backup</span></div></a></li><li class="depth-1"><a href="bacure.local-device.html#var-terminate"><div class="inner"><span>terminate</span></div></a></li><li class="depth-1"><a href="bacure.local-device.html#var-transport"><div class="inner"><span>transport</span></div></a></li><li class="depth-1"><a href="bacure.local-device.html#var-update-configs"><div class="inner"><span>update-configs</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">bacure.local-device</h2><div class="doc"><pre class="plaintext"></pre></div><div class="public anchor" id="var-add-object"><h3>add-object</h3><div class="usage"><code>(add-object object-map)</code></div><div class="doc"><pre class="plaintext">Add a local object and return it. You should probably just use `add-or-update-object&apos;.
</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/local_device.clj#L193">view source</a></div></div><div class="public anchor" id="var-add-or-update-object"><h3>add-or-update-object</h3><div class="usage"><code>(add-or-update-object object-map)</code></div><div class="doc"><pre class="plaintext">Update a local object properties. Create the object it if not
already present. Will not try to modify any :object-type
or :object-identifier.</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/local_device.clj#L206">view source</a></div></div><div class="public anchor" id="var-clear-all.21"><h3>clear-all!</h3><div class="usage"><code>(clear-all!)</code></div><div class="doc"><pre class="plaintext">Mostly a development function; Destroy all traces of a local-device.
</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/local_device.clj#L261">view source</a></div></div><div class="public anchor" id="var-default-configs"><h3>default-configs</h3><div class="usage"></div><div class="doc"><pre class="plaintext">Some default configurations for device creation.
</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/local_device.clj#L84">view source</a></div></div><div class="public anchor" id="var-get-configs"><h3>get-configs</h3><div class="usage"><code>(get-configs)</code></div><div class="doc"><pre class="plaintext">Return a map of the local-device configurations
</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/local_device.clj#L59">view source</a></div></div><div class="public anchor" id="var-i-am-broadcast"><h3>i-am-broadcast</h3><div class="usage"><code>(i-am-broadcast)</code></div><div class="doc"><pre class="plaintext">Send an &apos;I am&apos; broadcast on the network.
</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/local_device.clj#L148">view source</a></div></div><div class="public anchor" id="var-initialize"><h3>initialize</h3><div class="usage"><code>(initialize)</code></div><div class="doc"><pre class="plaintext">Initialize the local device. This will bind it to it&apos;s port (most
likely 47808) and load any programs available for the local-device.
The port will remain unavailable until the device is terminated.
Once terminated, you should discard the device and create a new one
if needed.

For more information on the local-device &apos;programs&apos; operations, see
the bacure.local-save namespace.

Return true if initializing (binding to port) is successful.</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/local_device.clj#L154">view source</a></div></div><div class="public anchor" id="var-ip-network"><h3>ip-network</h3><div class="usage"><code>(ip-network)</code><code>(ip-network broadcast-address)</code><code>(ip-network broadcast-address port)</code><code>(ip-network broadcast-address port local-address)</code><code>(ip-network broadcast-address port local-address network-number)</code></div><div class="doc"><pre class="plaintext">Create a new ip network for a local-device.
</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/local_device.clj#L40">view source</a></div></div><div class="public anchor" id="var-load-local-device-backup"><h3>load-local-device-backup</h3><div class="usage"><code>(load-local-device-backup &amp; new-configs)</code></div><div class="doc"><pre class="plaintext">Load the local-device backup file and reset it with this new
configuration.</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/local_device.clj#L274">view source</a></div></div><div class="public anchor" id="var-local-device"><h3>local-device</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/local_device.clj#L31">view source</a></div></div><div class="public anchor" id="var-local-device-backup"><h3>local-device-backup</h3><div class="usage"><code>(local-device-backup)</code></div><div class="doc"><pre class="plaintext">Spit all important information about the local device into a map.
:configs are all the configs returned by &apos;get-configs&apos;
:objects is the list of local objects (and their properties)
:provided-configs are the configuration given when the device was
created using `new-local-device&apos;.</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/local_device.clj#L228">view source</a></div></div><div class="public anchor" id="var-local-device-configs"><h3>local-device-configs</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/local_device.clj#L32">view source</a></div></div><div class="public anchor" id="var-local-objects"><h3>local-objects</h3><div class="usage"><code>(local-objects)</code></div><div class="doc"><pre class="plaintext">Return a list of local objects
</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/local_device.clj#L188">view source</a></div></div><div class="public anchor" id="var-mapify"><h3>mapify</h3><h4 class="type">macro</h4><div class="usage"><code>(mapify &amp; symbols)</code></div><div class="doc"><pre class="plaintext">Given some symbols, construct a map with the symbols as keys, and
 the value of the symbols as the map values. For example:
(Let [aa 12]
    (mapify aa))
=&gt; {:aa 12}</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/local_device.clj#L14">view source</a></div></div><div class="public anchor" id="var-net"><h3>net</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/local_device.clj#L38">view source</a></div></div><div class="public anchor" id="var-new-local-device"><h3>new-local-device</h3><div class="usage"><code>(new-local-device)</code><code>(new-local-device configs-map)</code></div><div class="doc"><pre class="plaintext">Return a new configured BACnet local device . (A device is required
to communicate over the BACnet network.). Use the function
&apos;initialize&apos; and &apos;terminate&apos; to bind and unbind the device to the
BACnet port. If needed, the initial configurations are available in
the atom &apos;local-device-configs.

The optional config map can contain the following:
:device-id &lt;number&gt;
:broadcast-address &lt;string&gt;
:port &lt;number&gt;
:local-address &lt;string&gt; &lt;----- You probably don&apos;t want to use it.
:&apos;other-configs&apos; &lt;string&gt; OR &lt;number&gt; OR other

The device ID is the device identifier on the network. It should be
unique.

The broadcast-address is the address on which we send &apos;WhoIs&apos;. You
should not have to provide anything for this, unless you have
multiple interfaces or want to trick your machine into sending to a
&apos;fake&apos; broadcast address.

Port and destination port are the BACnet port, usually 47808.

The local-address will default to &quot;0.0.0.0&quot;, also known as the
&apos;anylocal&apos;. (Default by the underlying BACnet4J library.) This is
required on Linux, Solaris and some Windows machines in order to
catch packet sent as a broadcast. You can manually change it, but
unless you know exactly what you are doing, bad things will happen.

The &apos;other-configs&apos; is any configuration returned when using the
function &apos;get-configs&apos;. These configuation can be set when the
device is created simply by providing them in the arguments. For
example, to change the vendor name, simply add &apos;{:vendor-name &quot;some
vendor name&quot;}&apos;.</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/local_device.clj#L95">view source</a></div></div><div class="public anchor" id="var-remove-all-objects"><h3>remove-all-objects</h3><div class="usage"><code>(remove-all-objects)</code></div><div class="doc"><pre class="plaintext">Remove all local object
</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/local_device.clj#L223">view source</a></div></div><div class="public anchor" id="var-remove-object"><h3>remove-object</h3><div class="usage"><code>(remove-object object-map)</code></div><div class="doc"><pre class="plaintext">Remove a local object by its object identifier.
</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/local_device.clj#L217">view source</a></div></div><div class="public anchor" id="var-reset-local-device"><h3>reset-local-device</h3><div class="usage"><code>(reset-local-device)</code><code>(reset-local-device new-config)</code></div><div class="doc"><pre class="plaintext">Terminate the local device and discard it. Replace it with a new
local device, and apply the same configurations as the previous one.
If a map with new configurations is provided, it will be merged with
the old config.

(reset-local-device {:device-id 1112})
---&gt; reset the device and change the device id.</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/local_device.clj#L243">view source</a></div></div><div class="public anchor" id="var-save-local-device-backup"><h3>save-local-device-backup</h3><div class="usage"><code>(save-local-device-backup)</code></div><div class="doc"><pre class="plaintext">Save the device backup on a local file and return the config map.
</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/local_device.clj#L268">view source</a></div></div><div class="public anchor" id="var-terminate"><h3>terminate</h3><div class="usage"><code>(terminate)</code></div><div class="doc"><pre class="plaintext">Terminate the local device, freeing any bound port in the process.
</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/local_device.clj#L182">view source</a></div></div><div class="public anchor" id="var-transport"><h3>transport</h3><div class="usage"><code>(transport network)</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/local_device.clj#L52">view source</a></div></div><div class="public anchor" id="var-update-configs"><h3>update-configs</h3><div class="usage"><code>(update-configs properties-smap)</code></div><div class="doc"><pre class="plaintext">Given a map of properties, will update the local-device. Return the
device configs. Please note that many properties CANNOT be changed
while the device is initialized (:object-identifier for example) and
will simply be discarded.</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/local_device.clj#L70">view source</a></div></div></div></body></html>