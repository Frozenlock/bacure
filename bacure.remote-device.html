<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>bacure.remote-device documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Bacure</span> <span class="project-version">1.1.1</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>bacure</span></div></div></li><li class="depth-2"><a href="bacure.coerce.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>coerce</span></div></a></li><li class="depth-3 branch"><a href="bacure.coerce.obj.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>obj</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>service</span></div></div></li><li class="depth-4 branch"><a href="bacure.coerce.service.acknowledgement.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>acknowledgement</span></div></a></li><li class="depth-4"><a href="bacure.coerce.service.confirmed.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>confirmed</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>type</span></div></div></li><li class="depth-4 branch"><a href="bacure.coerce.type.constructed.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>constructed</span></div></a></li><li class="depth-4 branch"><a href="bacure.coerce.type.enumerated.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>enumerated</span></div></a></li><li class="depth-4 branch"><a href="bacure.coerce.type.error.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>error</span></div></a></li><li class="depth-4"><a href="bacure.coerce.type.primitive.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>primitive</span></div></a></li><li class="depth-2 branch"><a href="bacure.core.html"><div class="inner"><span class="tree" style="top: -300px;"><span class="top" style="height: 309px;"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="bacure.events.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>events</span></div></a></li><li class="depth-2 branch"><a href="bacure.local-device.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>local-device</span></div></a></li><li class="depth-2 branch"><a href="bacure.local-save.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>local-save</span></div></a></li><li class="depth-2 branch"><a href="bacure.network.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>network</span></div></a></li><li class="depth-2 branch"><a href="bacure.read-properties.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>read-properties</span></div></a></li><li class="depth-2 branch current"><a href="bacure.remote-device.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>remote-device</span></div></a></li><li class="depth-2 branch"><a href="bacure.serial-connection.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>serial-connection</span></div></a></li><li class="depth-2 branch"><a href="bacure.services.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>services</span></div></a></li><li class="depth-2 branch"><a href="bacure.state.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>state</span></div></a></li><li class="depth-2"><a href="bacure.util.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>util</span></div></a></li><li class="depth-1"><a href="user.html"><div class="inner"><span class="tree" style="top: -672px;"><span class="top" style="height: 681px;"></span><span class="bottom"></span></span><span>user</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="bacure.remote-device.html#var-advanced-property"><div class="inner"><span>advanced-property</span></div></a></li><li class="depth-1"><a href="bacure.remote-device.html#var-all-extended-information"><div class="inner"><span>all-extended-information</span></div></a></li><li class="depth-1"><a href="bacure.remote-device.html#var-cached-extended-information"><div class="inner"><span>cached-extended-information</span></div></a></li><li class="depth-1"><a href="bacure.remote-device.html#var-create-remote-object.21"><div class="inner"><span>create-remote-object!</span></div></a></li><li class="depth-1"><a href="bacure.remote-device.html#var-delete-remote-object.21"><div class="inner"><span>delete-remote-object!</span></div></a></li><li class="depth-1"><a href="bacure.remote-device.html#var-discover-network"><div class="inner"><span>discover-network</span></div></a></li><li class="depth-1"><a href="bacure.remote-device.html#var-extended-information"><div class="inner"><span>extended-information</span></div></a></li><li class="depth-1"><a href="bacure.remote-device.html#var-find-remote-device"><div class="inner"><span>find-remote-device</span></div></a></li><li class="depth-1"><a href="bacure.remote-device.html#var-find-remote-devices"><div class="inner"><span>find-remote-devices</span></div></a></li><li class="depth-1"><a href="bacure.remote-device.html#var-find-remote-devices-having-object"><div class="inner"><span>find-remote-devices-having-object</span></div></a></li><li class="depth-1"><a href="bacure.remote-device.html#var-get-remote-devices-having-object"><div class="inner"><span>get-remote-devices-having-object</span></div></a></li><li class="depth-1"><a href="bacure.remote-device.html#var-IAm-received-auto-fetch-extended-information"><div class="inner"><span>IAm-received-auto-fetch-extended-information</span></div></a></li><li class="depth-1"><a href="bacure.remote-device.html#var-is-alive.3F"><div class="inner"><span>is-alive?</span></div></a></li><li class="depth-1"><a href="bacure.remote-device.html#var-networking-info"><div class="inner"><span>networking-info</span></div></a></li><li class="depth-1"><a href="bacure.remote-device.html#var-rd"><div class="inner"><span>rd</span></div></a></li><li class="depth-1"><a href="bacure.remote-device.html#var-remote-devices"><div class="inner"><span>remote-devices</span></div></a></li><li class="depth-1"><a href="bacure.remote-device.html#var-remote-devices-and-names"><div class="inner"><span>remote-devices-and-names</span></div></a></li><li class="depth-1"><a href="bacure.remote-device.html#var-retrieve-extended-information.21"><div class="inner"><span>retrieve-extended-information!</span></div></a></li><li class="depth-1"><a href="bacure.remote-device.html#var-segmentation-supported"><div class="inner"><span>segmentation-supported</span></div></a></li><li class="depth-1"><a href="bacure.remote-device.html#var-services-supported"><div class="inner"><span>services-supported</span></div></a></li><li class="depth-1"><a href="bacure.remote-device.html#var-set-remote-properties.21"><div class="inner"><span>set-remote-properties!</span></div></a></li><li class="depth-1"><a href="bacure.remote-device.html#var-set-remote-property.21"><div class="inner"><span>set-remote-property!</span></div></a></li><li class="depth-1"><a href="bacure.remote-device.html#var-write-single-multiple-properties"><div class="inner"><span>write-single-multiple-properties</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">bacure.remote-device</h1><div class="doc"><pre class="plaintext"></pre></div><div class="public anchor" id="var-advanced-property"><h3>advanced-property</h3><div class="usage"><code>(advanced-property property-value priority property-array-index)</code></div><div class="doc"><pre class="plaintext">Take a property and wrap it inside a map with the priority and
property-array-index.</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/1.1.1/src/bacure/remote_device.clj#L269">view source</a></div></div><div class="public anchor" id="var-all-extended-information"><h3>all-extended-information</h3><div class="usage"><code>(all-extended-information)</code><code>(all-extended-information local-device-id)</code></div><div class="doc"><pre class="plaintext">Make sure we have the extended information of every known
remote devices.

Can be used some time after the network discovery mechanism, as
some devices might take a while to answer the WhoIs.

Remote devices are queried in parallel.</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/1.1.1/src/bacure/remote_device.clj#L129">view source</a></div></div><div class="public anchor" id="var-cached-extended-information"><h3>cached-extended-information</h3><div class="usage"><code>(cached-extended-information device-id)</code><code>(cached-extended-information local-device-id device-id)</code></div><div class="doc"><pre class="plaintext">Return the cached remote device extended information. Nil if we have nothing.
</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/1.1.1/src/bacure/remote_device.clj#L63">view source</a></div></div><div class="public anchor" id="var-create-remote-object.21"><h3>create-remote-object!</h3><div class="usage"><code>(create-remote-object! device-id object-map)</code><code>(create-remote-object! local-device-id device-id object-map)</code></div><div class="doc"><pre class="plaintext">Send a 'create object request' to the remote device. Must be given
at least an :object-identifier OR an :object-type. If
an :object-identifier isn't given, the numbering of the new object
will be choosen by the remote device.

Will block until we receive a response back, success or failure.
If the request times out, an exception is thrown.</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/1.1.1/src/bacure/remote_device.clj#L243">view source</a></div></div><div class="public anchor" id="var-delete-remote-object.21"><h3>delete-remote-object!</h3><div class="usage"><code>(delete-remote-object! device-id object-identifier)</code><code>(delete-remote-object! local-device-id device-id object-identifier)</code></div><div class="doc"><pre class="plaintext">Send a 'delete object' request to a remote device.

 Will block until we receive a response back, success or failure.
If the request times out, an exception is thrown.</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/1.1.1/src/bacure/remote_device.clj#L259">view source</a></div></div><div class="public anchor" id="var-discover-network"><h3>discover-network</h3><div class="usage"><code>(discover-network)</code><code>(discover-network local-device-id)</code><code>(discover-network local-device-id tries)</code></div><div class="doc"><pre class="plaintext">Find remote devices and their extended info. By default, will try
up to 5 time if not a single device answer. Return the list of
remote-devices.

Should be called in a future call to avoid `hanging' the program
while waiting for the remote devices to answer.</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/1.1.1/src/bacure/remote_device.clj#L227">view source</a></div></div><div class="public anchor" id="var-extended-information"><h3>extended-information</h3><div class="usage"><code>(extended-information device-id)</code><code>(extended-information local-device-id device-id)</code></div><div class="doc"><pre class="plaintext">Return the device extended information that we have cached locally,
or request it directly to the remote device.</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/1.1.1/src/bacure/remote_device.clj#L100">view source</a></div></div><div class="public anchor" id="var-find-remote-device"><h3>find-remote-device</h3><div class="usage"><code>(find-remote-device remote-device-id)</code><code>(find-remote-device remote-device-id {:keys [wait-seconds], :or {wait-seconds 1}, :as args})</code><code>(find-remote-device local-device-id remote-device-id {:keys [wait-seconds], :or {wait-seconds 1}, :as args})</code></div><div class="doc"><pre class="plaintext">Send a WhoIs for a single device-id, effectively finding a single
device. Some devices seem to ignore a general WhoIs broadcast, but
will answer a WhoIs request specifically for their ID.</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/1.1.1/src/bacure/remote_device.clj#L194">view source</a></div></div><div class="public anchor" id="var-find-remote-devices"><h3>find-remote-devices</h3><div class="usage"><code>(find-remote-devices)</code><code>(find-remote-devices {:keys [min-range max-range wait-seconds], :or {min-range 0, max-range 4194303, wait-seconds 1}, :as args})</code><code>(find-remote-devices local-device-id {:keys [min-range max-range wait-seconds], :or {min-range 0, max-range 4194303, wait-seconds 1}, :as args})</code></div><div class="doc"><pre class="plaintext">We find remote devices by sending a 'WhoIs' broadcast. Every device
that responds is added to the remote-devices field in the
local-device. WARNING: This won't ask the device if it supports
read-property-multiple. Thus, any property read based solely on this
remote device discovery might fail. The use of `discover-network' is
highly recommended, even if it might take a little longer to
execute.</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/1.1.1/src/bacure/remote_device.clj#L178">view source</a></div></div><div class="public anchor" id="var-find-remote-devices-having-object"><h3>find-remote-devices-having-object</h3><div class="usage"><code>(find-remote-devices-having-object object-identifier-or-name)</code><code>(find-remote-devices-having-object object-identifier-or-name {:keys [min-range max-range wait-seconds], :or {min-range 0, max-range 4194303, wait-seconds 1}, :as args})</code><code>(find-remote-devices-having-object local-device-id object-identifier-or-name {:keys [min-range max-range wait-seconds], :or {min-range 0, max-range 4194303, wait-seconds 1}, :as args})</code></div><div class="doc"><pre class="plaintext">Do a Who-Has and return the remote-device-ids of any remote devices that
respond. The Who-Has updates a cache that can be accessed at
bacure.events/cached-remote-objects, and that is the same cache we query
here.</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/1.1.1/src/bacure/remote_device.clj#L163">view source</a></div></div><div class="public anchor" id="var-get-remote-devices-having-object"><h3>get-remote-devices-having-object</h3><div class="usage"><code>(get-remote-devices-having-object object-identifier-or-name)</code><code>(get-remote-devices-having-object local-device-id object-identifier-or-name)</code></div><div class="doc"><pre class="plaintext">Query our cached remote-objects to see which remote-devices have the
specified object (if any). Use `find-remote-devices-having-object`
to update the cache.</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/1.1.1/src/bacure/remote_device.clj#L153">view source</a></div></div><div class="public anchor" id="var-IAm-received-auto-fetch-extended-information"><h3>IAm-received-auto-fetch-extended-information</h3><div class="usage"><code>(IAm-received-auto-fetch-extended-information local-device-id)</code></div><div class="doc"><pre class="plaintext">Listen to IAm and try to fetch extended-information.
</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/1.1.1/src/bacure/remote_device.clj#L107">view source</a></div></div><div class="public anchor" id="var-is-alive.3F"><h3>is-alive?</h3><div class="usage"><code>(is-alive? device-id)</code><code>(is-alive? local-device-id device-id)</code></div><div class="doc"><pre class="plaintext">Check if the remote device is still alive. This is the closest
thing to a 'ping' in the BACnet world.</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/1.1.1/src/bacure/remote_device.clj#L353">view source</a></div></div><div class="public anchor" id="var-networking-info"><h3>networking-info</h3><div class="usage"><code>(networking-info device-id)</code><code>(networking-info local-device-id device-id)</code></div><div class="doc"><pre class="plaintext">Return a map with the networking info of the remote device. (The
network number, the IP address, the port...)</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/1.1.1/src/bacure/remote_device.clj#L23">view source</a></div></div><div class="public anchor" id="var-rd"><h3>rd</h3><div class="usage"><code>(rd device-id)</code><code>(rd local-device-id device-id)</code></div><div class="doc"><pre class="plaintext">Get the remote device object by its device-id
</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/1.1.1/src/bacure/remote_device.clj#L17">view source</a></div></div><div class="public anchor" id="var-remote-devices"><h3>remote-devices</h3><div class="usage"><code>(remote-devices)</code><code>(remote-devices local-device-id)</code></div><div class="doc"><pre class="plaintext">Return the list of the current remote devices. These devices must
be in the local table. To scan a network, use `discover-network'.</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/1.1.1/src/bacure/remote_device.clj#L114">view source</a></div></div><div class="public anchor" id="var-remote-devices-and-names"><h3>remote-devices-and-names</h3><div class="usage"><code>(remote-devices-and-names)</code><code>(remote-devices-and-names local-device-id)</code></div><div class="doc"><pre class="plaintext">Return a list of vector pair with the device-id and its name.
--&gt;  ([1234 "SimpleServer"])</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/1.1.1/src/bacure/remote_device.clj#L122">view source</a></div></div><div class="public anchor" id="var-retrieve-extended-information.21"><h3>retrieve-extended-information!</h3><div class="usage"><code>(retrieve-extended-information! device-id)</code><code>(retrieve-extended-information! local-device-id device-id)</code></div><div class="doc"><pre class="plaintext">Retrieve the remote device extended information (name, segmentation,
property multiple, etc..) and update it locally.

Return the cached extended information.</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/1.1.1/src/bacure/remote_device.clj#L75">view source</a></div></div><div class="public anchor" id="var-segmentation-supported"><h3>segmentation-supported</h3><div class="usage"><code>(segmentation-supported device-id)</code><code>(segmentation-supported local-device-id device-id)</code></div><div class="doc"><pre class="plaintext">Return the type of segmentatin supported.
</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/1.1.1/src/bacure/remote_device.clj#L41">view source</a></div></div><div class="public anchor" id="var-services-supported"><h3>services-supported</h3><div class="usage"><code>(services-supported device-id)</code><code>(services-supported local-device-id device-id)</code></div><div class="doc"><pre class="plaintext">Return a map of the services supported by the remote device.
</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/1.1.1/src/bacure/remote_device.clj#L35">view source</a></div></div><div class="public anchor" id="var-set-remote-properties.21"><h3>set-remote-properties!</h3><div class="usage"><code>(set-remote-properties! device-id write-access-specifications)</code><code>(set-remote-properties! local-device-id device-id write-access-specifications)</code></div><div class="doc"><pre class="plaintext">Set the given remote object properties.

Will block until we receive a response back, success or failure.

'write-access-specifications' is a map of the form:
{[:analog-input 1] [[:present-value 10.0][:description "short description"]]}

If the remote device doesn't support 'write-property-multiple',
fallback to writing all properties individually.</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/1.1.1/src/bacure/remote_device.clj#L332">view source</a></div></div><div class="public anchor" id="var-set-remote-property.21"><h3>set-remote-property!</h3><div class="usage"><code>(set-remote-property! device-id object-identifier property-identifier property-value)</code><code>(set-remote-property! local-device-id device-id object-identifier property-identifier property-value)</code></div><div class="doc"><pre class="plaintext">Set the given remote object property.

 Will block until we receive a response back, success or failure.

Property-value can be the value directly OR a map resulting from
`advanced-property'</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/1.1.1/src/bacure/remote_device.clj#L280">view source</a></div></div><div class="public anchor" id="var-write-single-multiple-properties"><h3>write-single-multiple-properties</h3><div class="usage"><code>(write-single-multiple-properties local-device-id device-id write-access-specifications)</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/1.1.1/src/bacure/remote_device.clj#L319">view source</a></div></div></div></body></html>