<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>bacure.remote-device documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Bacure 0.5.2 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>bacure</span></div></div></li><li class="depth-2 branch"><a href="bacure.coerce.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>coerce</span></div></a></li><li class="depth-2 branch"><a href="bacure.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="bacure.local-device.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>local-device</span></div></a></li><li class="depth-2 branch"><a href="bacure.local-save.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>local-save</span></div></a></li><li class="depth-2 branch"><a href="bacure.network.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>network</span></div></a></li><li class="depth-2 branch"><a href="bacure.read-properties.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>read-properties</span></div></a></li><li class="depth-2 branch"><a href="bacure.read-properties-cached.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>read-properties-cached</span></div></a></li><li class="depth-2 current"><a href="bacure.remote-device.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>remote-device</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="bacure.remote-device.html#var-all-extended-information"><div class="inner"><span>all-extended-information</span></div></a></li><li class="depth-1"><a href="bacure.remote-device.html#var-clean-remote-devices-table"><div class="inner"><span>clean-remote-devices-table</span></div></a></li><li class="depth-1"><a href="bacure.remote-device.html#var-create-remote-object"><div class="inner"><span>create-remote-object</span></div></a></li><li class="depth-1"><a href="bacure.remote-device.html#var-delete-remote-object"><div class="inner"><span>delete-remote-object</span></div></a></li><li class="depth-1"><a href="bacure.remote-device.html#var-disable-automatic-rd-cleaning.21"><div class="inner"><span>disable-automatic-rd-cleaning!</span></div></a></li><li class="depth-1"><a href="bacure.remote-device.html#var-discover-network"><div class="inner"><span>discover-network</span></div></a></li><li class="depth-1"><a href="bacure.remote-device.html#var-extended-information"><div class="inner"><span>extended-information</span></div></a></li><li class="depth-1"><a href="bacure.remote-device.html#var-extended-information.3F"><div class="inner"><span>extended-information?</span></div></a></li><li class="depth-1"><a href="bacure.remote-device.html#var-find-remote-device"><div class="inner"><span>find-remote-device</span></div></a></li><li class="depth-1"><a href="bacure.remote-device.html#var-find-remote-devices"><div class="inner"><span>find-remote-devices</span></div></a></li><li class="depth-1"><a href="bacure.remote-device.html#var-is-alive.3F"><div class="inner"><span>is-alive?</span></div></a></li><li class="depth-1"><a href="bacure.remote-device.html#var-networking-info"><div class="inner"><span>networking-info</span></div></a></li><li class="depth-1"><a href="bacure.remote-device.html#var-rd"><div class="inner"><span>rd</span></div></a></li><li class="depth-1"><a href="bacure.remote-device.html#var-remote-devices"><div class="inner"><span>remote-devices</span></div></a></li><li class="depth-1"><a href="bacure.remote-device.html#var-remote-devices-and-names"><div class="inner"><span>remote-devices-and-names</span></div></a></li><li class="depth-1"><a href="bacure.remote-device.html#var-remove-if-dead"><div class="inner"><span>remove-if-dead</span></div></a></li><li class="depth-1"><a href="bacure.remote-device.html#var-remove-remote-device"><div class="inner"><span>remove-remote-device</span></div></a></li><li class="depth-1"><a href="bacure.remote-device.html#var-segmentation-supported"><div class="inner"><span>segmentation-supported</span></div></a></li><li class="depth-1"><a href="bacure.remote-device.html#var-services-supported"><div class="inner"><span>services-supported</span></div></a></li><li class="depth-1"><a href="bacure.remote-device.html#var-set-remote-property"><div class="inner"><span>set-remote-property</span></div></a></li><li class="depth-1"><a href="bacure.remote-device.html#var-start-automatic-rd-cleaning.21"><div class="inner"><span>start-automatic-rd-cleaning!</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">bacure.remote-device</h2><div class="doc"><pre class="plaintext"></pre></div><div class="public anchor" id="var-all-extended-information"><h3>all-extended-information</h3><div class="usage"><code>(all-extended-information)</code></div><div class="doc"><pre class="plaintext">Make sure we have the extended information of every known
remote devices.

Can be used some time after the network discovery mechanism, as
some devices might take a while to answer the WhoIs.

Remote devices are queried in parallel.</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/remote_device.clj#L92">view source</a></div></div><div class="public anchor" id="var-clean-remote-devices-table"><h3>clean-remote-devices-table</h3><div class="usage"><code>(clean-remote-devices-table)</code></div><div class="doc"><pre class="plaintext">Remove all the remote devices not answering our &apos;ping&apos;.

You should probably call this function every X amount of time to
keep the local list of remote devices clean.</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/remote_device.clj#L220">view source</a></div></div><div class="public anchor" id="var-create-remote-object"><h3>create-remote-object</h3><div class="usage"><code>(create-remote-object device-id object-map)</code></div><div class="doc"><pre class="plaintext">Send a &apos;create object request&apos; to the remote device. Must be given
at least an :object-identifier OR an :object-type. If
an :object-identifier isn&apos;t given, the numbering of the new object
will be choosen by the remote device.</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/remote_device.clj#L152">view source</a></div></div><div class="public anchor" id="var-delete-remote-object"><h3>delete-remote-object</h3><div class="usage"><code>(delete-remote-object device-id object-identifier)</code></div><div class="doc"><pre class="plaintext">Send a &apos;delete object&apos; request to a remote device.
</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/remote_device.clj#L165">view source</a></div></div><div class="public anchor" id="var-disable-automatic-rd-cleaning.21"><h3>disable-automatic-rd-cleaning!</h3><div class="usage"><code>(disable-automatic-rd-cleaning!)</code></div><div class="doc"><pre class="plaintext">Stop the automatic remote devices list cleaning. Useful if you have
a slow network and don&apos;t want to send non-critical packets, or if
you want to prevent a network request while you do an
operation.</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/remote_device.clj#L231">view source</a></div></div><div class="public anchor" id="var-discover-network"><h3>discover-network</h3><div class="usage"><code>(discover-network)</code><code>(discover-network tries)</code></div><div class="doc"><pre class="plaintext">Find remote devices and their extended info. By default, will try
up to 5 time if not a single device answer. Return the list of
remote-devices.

Should be called in a future call to avoid `hanging&apos; the program
while waiting for the remote devices to answer.</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/remote_device.clj#L138">view source</a></div></div><div class="public anchor" id="var-extended-information"><h3>extended-information</h3><div class="usage"><code>(extended-information device-id)</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/remote_device.clj#L55">view source</a></div></div><div class="public anchor" id="var-extended-information.3F"><h3>extended-information?</h3><div class="usage"><code>(extended-information? device-id)</code></div><div class="doc"><pre class="plaintext">True if we already have the device extended information, nil
otherwise.</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/remote_device.clj#L49">view source</a></div></div><div class="public anchor" id="var-find-remote-device"><h3>find-remote-device</h3><div class="usage"><code>(find-remote-device id)</code></div><div class="doc"><pre class="plaintext">Send a WhoIs for a single device-id, effectively finding a single
device. Some devices seem to ignore a general WhoIs broadcast, but
will answer a WhoIs request specifically for their ID.</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/remote_device.clj#L121">view source</a></div></div><div class="public anchor" id="var-find-remote-devices"><h3>find-remote-devices</h3><div class="usage"><code>(find-remote-devices &amp; [{:keys [min-range max-range]}])</code></div><div class="doc"><pre class="plaintext">We find remote devices by sending a &apos;WhoIs&apos; broadcast. Every device
that responds is added to the remote-devices field in the
local-device. WARNING: This won&apos;t ask the device if it supports
read-property-multiple. Thus, any property read based solely on this
remote device discovery might fail. The use of `discover-network&apos; is
highly recommended, even if it might take a little longer to
execute.</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/remote_device.clj#L106">view source</a></div></div><div class="public anchor" id="var-is-alive.3F"><h3>is-alive?</h3><div class="usage"><code>(is-alive? device-id)</code></div><div class="doc"><pre class="plaintext">Check if the remote device is still alive. This is the closest
thing to a &apos;ping&apos; in the BACnet world.</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/remote_device.clj#L196">view source</a></div></div><div class="public anchor" id="var-networking-info"><h3>networking-info</h3><div class="usage"><code>(networking-info device-id)</code></div><div class="doc"><pre class="plaintext">Return a map with the networking info of the remote device. (The
network number, the IP address, the port...)</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/remote_device.clj#L24">view source</a></div></div><div class="public anchor" id="var-rd"><h3>rd</h3><div class="usage"><code>(rd device-id)</code></div><div class="doc"><pre class="plaintext">Get the remote device by its device-id
</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/remote_device.clj#L19">view source</a></div></div><div class="public anchor" id="var-remote-devices"><h3>remote-devices</h3><div class="usage"><code>(remote-devices)</code></div><div class="doc"><pre class="plaintext">Return the list of the current remote devices. These devices must
be in the local table. To scan a network, use `discover-network&apos;.</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/remote_device.clj#L76">view source</a></div></div><div class="public anchor" id="var-remote-devices-and-names"><h3>remote-devices-and-names</h3><div class="usage"><code>(remote-devices-and-names)</code></div><div class="doc"><pre class="plaintext">Return a list of vector pair with the device-id and its name.
--&gt;  ([1234 &quot;SimpleServer&quot;])</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/remote_device.clj#L86">view source</a></div></div><div class="public anchor" id="var-remove-if-dead"><h3>remove-if-dead</h3><div class="usage"><code>(remove-if-dead device-id)</code></div><div class="doc"><pre class="plaintext">Remove the remote device from the local table if it fails to answer
in a timely manner (determined by the timeout).</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/remote_device.clj#L212">view source</a></div></div><div class="public anchor" id="var-remove-remote-device"><h3>remove-remote-device</h3><div class="usage"><code>(remove-remote-device device-id)</code></div><div class="doc"><pre class="plaintext">Remove a remote device from the local device table.

WARNING: Uses a custom function not yet in the official bacnet4j
library.</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/remote_device.clj#L205">view source</a></div></div><div class="public anchor" id="var-segmentation-supported"><h3>segmentation-supported</h3><div class="usage"><code>(segmentation-supported device-id)</code></div><div class="doc"><pre class="plaintext">Return the type of segmentatin supported.
</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/remote_device.clj#L43">view source</a></div></div><div class="public anchor" id="var-services-supported"><h3>services-supported</h3><div class="usage"><code>(services-supported device-id)</code></div><div class="doc"><pre class="plaintext">Return a map of the services supported by the remote device.
</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/remote_device.clj#L37">view source</a></div></div><div class="public anchor" id="var-set-remote-property"><h3>set-remote-property</h3><div class="usage"><code>(set-remote-property device-id object-identifier property-identifier property-value)</code></div><div class="doc"><pre class="plaintext">Set the given remote object property.
</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/remote_device.clj#L171">view source</a></div></div><div class="public anchor" id="var-start-automatic-rd-cleaning.21"><h3>start-automatic-rd-cleaning!</h3><div class="usage"><code>(start-automatic-rd-cleaning!)</code><code>(start-automatic-rd-cleaning! time)</code></div><div class="doc"><pre class="plaintext">Check if the remote devices are alive every X minutes (10 by default). If they aren&apos;t,
remove them from the remote devices list.</pre></div><div class="src-link"><a href="https://github.com/Frozenlock/bacure/blob/master/src/bacure/remote_device.clj#L238">view source</a></div></div></div></body></html>